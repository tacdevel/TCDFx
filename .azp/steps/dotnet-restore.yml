########################################################################################################################
# FileName:             dotnet-restore.yml
# Copyright/License:    https://github.com/tom-corwin/tacdevlibs/blob/master/LICENSE.md
########################################################################################################################

parameters:
- name: projectName
  type: string
  default: ''
- name: projectCategory
  type: string
  default: ''
  values:
  - 'sources'
  - 'examples'
  - 'tests'
- name: configuration
  type: string
  default: ''
  values:
  - 'Debug'
  - 'Release'

steps:
- task: DotNetCoreCLI@2
  name: 'RestorePackages'
  displayName: 'Restore Packages (via `dotnet restore`)'
  continueOnError: false
  inputs:
    command: 'restore'
    ${{ if eq(variables['Agent.OS'], 'Windows_NT') }}:
      projects: '$(Build.Repository.LocalPath)\${{ parameters.projectCategory }}\${{ parameters.projectName }}\${{ parameters.projectName }}.csproj'
    ${{ if ne(variables['Agent.OS'], 'Windows_NT') }}:
      projects: '$(Build.Repository.LocalPath)/${{ parameters.projectCategory }}/${{ parameters.projectName }}/${{ parameters.projectName }}.csproj'
    arguments: '--nologo --force --no-dependencies  -c Release -p:_IsAutoBuild=true'